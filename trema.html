<!DOCTYPE html>
<!--[if lt IE 7]> <html class="no-js ie6" lang="en"> <![endif]-->
<!--[if IE 7]>    <html class="no-js ie7" lang="en"> <![endif]-->
<!--[if IE 8]>    <html class="no-js ie8" lang="en"> <![endif]-->
<!--[if gt IE 8]><!-->  <html class="no-js" lang="en"> <!--<![endif]-->
<head>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
	
	<title>Network Programming 入門</title>
	
	<meta name="description" content="Trema">
	<meta name="author" content="Masahiro Bussaki">
	<meta name="viewport" content="width=1024, user-scalable=no">
	
	<!-- Core and extension CSS files -->
	<link rel="stylesheet" href="../core/deck.core.css">
	<link rel="stylesheet" href="../extensions/goto/deck.goto.css">
	<link rel="stylesheet" href="../extensions/menu/deck.menu.css">
	<link rel="stylesheet" href="../extensions/navigation/deck.navigation.css">
	<link rel="stylesheet" href="../extensions/status/deck.status.css">
	<link rel="stylesheet" href="../extensions/hash/deck.hash.css">
	<link rel="stylesheet" href="../extensions/scale/deck.scale.css">
	
	<!-- Style theme. More available in /themes/style/ or create your own. -->
	<!-- link rel="stylesheet" href="../themes/style/web-2.0.css" -->
	<link rel="stylesheet" href="../themes/style/swiss.css">
	
	<!-- Transition theme. More available in /themes/transition/ or create your own. -->
	<link rel="stylesheet" href="../themes/transition/horizontal-slide.css">
	
	<script src="../modernizr.custom.js"></script>
</head>

<body class="deck-container">

<!-- Begin slides -->
<section class="slide" id="タイトル">
	<h1>Network<br>Programming<br>入門</h1>
</section>

<section class="slide" id="自己紹介">
  <h2>自己紹介</h2>
  <ul>
    <li><strong>名前</strong> : 佛崎　雅弘 (ぶっさき　まさひろ)</li>
    <li>
      <strong>職業</strong> : ソフトウェア開発者
      <ul>
        <li>ネットワーク監視ツール</li>
        <li>ネットワークプロトコル実装</li>
        <li>デバイスドライバー開発</li>
        <li>ルーター開発</li>
      </ul>
    </li>
    <li><strong>言語</strong> : C/C++/JAVA/Ruby/awk</li>
  </ul>
</section>

<section class="slide" id="Agenda">
  <h2>Agenda</h2>
  <ol>
    <li>
      <strong>SDN</strong>
      <ul>
        <li>SDNとは</li>
        <li>OpenFlowとは</li>
        <li>事例紹介</li>
      </ul>
    </li>
    <li>
      <strong>Trema</strong>
      <ul>
        <li>Tremaとは</li>
        <li>事例紹介</li>
      </ul>
    </li>
    <li>
      <strong>Virtual-Network-Platform<strong>
      <ul>
        <li>Virtual-Network-Platformとは</li>
      </ul>
    </li>
  </ol>
</section>

<section class="slide" id="SDN">
  <h2>SDNとは</h2>

  <div align=center><pre>ネットワークをソフトウェアで制御・管理する</pre></div>
  <div align=right>コンセプト　　</div>
</section>

<section class="slide" id="SDN">
  <h2>NaaSとは</h2>

  <div align=center><pre>物理ネットワーク上に仮想ネットワークを構築する</pre></div>
  <div align=right>技術　　</div>

  <img height="512" src="./NaaS.png">
  <!-- VLAN -->
</section>

<section class="slide" id="SDN">
  <h2>OpenFlowとは</h2>

  <div align=center><pre>ネットワーク装置とコントローラー間のインターフェース仕様</pre></div>
  <div align=right>プロトコル　　</div>

  <img height="512" src="./OpenFlowSpecification.png">
</section>

<section class="slide" id="なぜSDN">
  <h2>なぜSDN</h2>

  <p>ネットワークへの要望</p>
  <ul>
    <li class="slide" id="whysdn-1">
      <strong>集中管理</strong>
      <p>ネットワーク上に散らばるネットワーク機器を一か所で集中管理したい。</p>
    </li>
    <li class="slide" id="whysdn-2">
      <strong>障害対応</strong>
      <p>回線断時の迂回経路設定等、ネットワーク障害への対応を自動化したい。</p>
    </li>
    <li class="slide" id="whysdn-3">
      <strong>ベンダーロックイン</strong>
      <p>ネットワーク構築においてベンダーロックインされたくない。</p>
    </li>
    <li class="slide" id="whysdn-4">
      <strong>仮想化</strong>
      <p>サーバー仮想化に動的に対応したい。</p>
    </li>
  </ul>
</section>

<section class="slide" id="なぜOpenFlow">
  <h2>なぜOpenFlow</h2>

  <p>OpenFlowは、コントローラーがネットワーク全体を俯瞰して経路を決定し、スイッチに経路を通知する集中管理型</p>

  <img height="512" src="./Centralized.png">
</section>

<section class="slide" id="OpenFlow Standard">
  <h2>OpenFlow 標準化</h2>

  <p>ONF(Open Network Foundation)で標準化</p>
  <ul>
    <!-- li>
      <p>2007年<br>
      OpenFlowスイッチコンソーシアム設立</p>
    </li -->
    <li>
      <p>2010年 1月<br>
      OpenFlow Switch Specification 1.0</p>
    </li>
    <li>
      <p>2011年 2月<br>
      OpenFlow Switch Specification 1.1</p>
    </li>
    <!-- li>
      <p>2011年 3月<br>
      ONF(Open Networking Foundation)発足</p>
    </li -->
    <li>
      <p>2011年12月<br>
      OpenFlow Switch Specification 1.2</p>
    </li>
    <li>
      <p>2012年 4月<br>
      OpenFlow Switch Specification 1.3</p>
    </li>
    <li>
      <p>2013年 8月<br>
      OpenFlow Switch Specification 1.4</p>
    </li>
</section>

<section class="slide" id="OpenFlow ">
  <h2>OpenFlow 変更点</h2>

  <ul>
    <li>
      <p><strong>OpenFlow 1.0<br>
         キャンパスネットワークやDC内のネットワークがターゲット</p>
      <!-- p>キャンパスネットワークやDC内のネットワークを意識したプロトコル(Ethernet,VLAN,IPv4,TCP,UDP等)をサポート</p -->
    </li>
    <li>
      <p>OpenFlow 1.1<br>
         DC間やキャリア網をターゲットに追加</p>
      <!-- p>DC間やキャリア網を意識した通信プロトコルMPLSやVLANのQinQへ対応。<br>
         パケットパイプライン処理を実現するための複数フローテーブルの導入</p -->
    </li>
    <li>
      <p>OpenFlow 1.2<br>
         IPv6をサポート。</p>
      <!-- p>IPv6へ対応。<br>
         拡張マッチング記述方式TLV(Type Length Value)を導入。<br>
         コントローラの冗長化に対応。</p -->
    </li>
    <li>
      <p>OpenFlow 1.3<br>
         サポートプロトコルの拡大<br>
         QoS対応</p>
      <!-- ul>
        <li>OpenFlow ControllerでのIPv6サポート</li>
        <li>DCやVPN等で使いやすいようにトンネリングと論理ポートを抽象化</li>
        <li>DC間で使用されているPBB(Provider Backbone Bridging)に対応</li>
        <li>ネットワークの帯域の制御のためにフロー単位のQoSに対応</li>
        <li>OpenFlow Switch でフロー毎の計測やコネクション毎のイベントフィルタをサポート</li>
      </ul -->
    </li>
    <li>
      <p>OpenFlow 1.4<br>
         m(..)m</p>
    </li>
  </ul>
</section>

<section class="slide" id="OpenFlow #1">
  <h2>パケット受信</h2>
  <img height="640"src="./OpenFlow-1.png">
</section>

<section class="slide" id="OpenFlow #2">
  <h2>FDB参照</h2>
  <img height="640"src="./OpenFlow-2.png">
</section>

<section class="slide" id="OpenFlow #3">
  <h2>OFCに問い合わせ</h2>
  <img height="640"src="./OpenFlow-3.png">
</section>

<section class="slide" id="OpenFlow #4">
  <h2>処理方法計算</h2>
  <img height="640"src="./OpenFlow-4.png">
</section>

<section class="slide" id="OpenFlow #5">
  <h2>フロー登録</h2>
  <img height="640"src="./OpenFlow-5.png">
</section>

<section class="slide" id="OpenFlow #6">
  <h2>パケット転送</h2>
  <img height="640"src="./OpenFlow-6.png">
</section>

<section class="slide" id="Google">
  <h2>Google</h2>

  <blockquote cite="http://www.itworldcanada.com/article/how-googles-openflow-backbone-works/46284">
  <p>..., and we’re able to run our wide-area lines at close to 100 per cent utilization, ...</p>
  <p><cite>John Dix @itworldca</cent></p>
  </blockquote>
  <div align=right>DC間に適用し、回線を有効活用</div>
<!--
http://www.opennetsummit.org/archives/apr12/hoelzle-tue-openflow.pdf
-->
</section>

<section class="slide" id="Google">
  <h2>Biglobe</h2>

  <blockquote cite="http://www.biglobe.co.jp/pressroom/release/2013/04/130422-a">
  <p>...従来2週間かかっていたインフラ構築を約10分へと大幅に短縮。<p>
  <p><cite>NECビッグローブ株式会社</cent></p>
  </blockquote>
  <div align=right>IaaS基盤に適用し、インフラ構築時間を短縮</div>
  
</section>

<section class="slide" id="Trema">
  <h2>Tremaとは</h2>
 
  <div align=center><pre>OpenFlowコントローラーを作成するためのフレームワーク</pre></div>
  <ul>
    <li>開発言語はRuby and C</li>
    <li>GPLv2ライセンス</li>
    <li><a href="https://github.com/trema">https://github.com/trema</a></li>
  </ul>
  <center>
  <table>
  <tr>
  <td><img width=400 src="http://image.gihyo.co.jp/assets/images/dev/serial/01/openflow_sd/0010/thumb/TH400_002.jpg" alt="秘密結社トレマのマーク"></td>
  <td>　　　　</td>
  <td><img width=400 src="http://image.gihyo.co.jp/assets/images/dev/serial/01/openflow_sd/0010/thumb/TH400_p01.jpg" alt="Tremaプロジェクトメンバー"></td>
  </tr>
  </table>
  </center>
</section>

<section class="slide" id="OpenFlowFramework">
  <h2>OpenFlowフレームワーク</h2>
 
  <center>
  <table>
    <tr bgcolor="#eeeeee"> 
      <th>　フレームワーク　</th>
      <th>　ver　</th>
      <th>　　言語　　</th>
      <th>　　　　　開発元　　　　　</th>
      <th>　ライセンス　</th>
    </tr>
    <tr><td>　</td></tr>
    <tr>
      <td>Trema</td>
      <td align="center">1.0</td>
      <td align="center">Ruby</td>
      <td>Tremaプロジェクト</td>
      <td align="center">GPLv2</td>
    </tr>
    <tr><td>　</td></tr>
    <tr>
      <td>POX</td>
      <td align="center">1.0</td>
      <td align="center">Python</td>
      <td>UCバークレイ</td>
      <td align="center">GPLv3</td>
    </tr>
    <tr><td>　</td></tr>
    <tr>
      <td>Nox</td>
      <td align="center">1.0</td>
      <td align="center">C++</td>
      <td>Nicira<br>スタンフォード大学<br>UCバークレイ</td>
      <td align="center">GPLv3</td>
    </tr>
    <tr><td>　</td></tr>
    <tr>
      <td>Floodlight</td>
      <td align="center">1.0</td>
      <td align="center">JAVA</td>
      <td>Big Switch Network</td>
      <td align="center">Apache</td>
    </tr>
    <tr><td>　</td></tr>
    <tr>
      <td>TremaEdge</td>
      <td align="center">1.3</td>
      <td align="center">Ruby</td>
      <td>Tremaプロジェクト</td>
      <td align="center">GPLv2</td>
    </tr>
   </table>
   </center>

  <!-- ul>
    <li>1.0</li>
      <ul>
        <li>Trema - Ruby</li>
        <li>POX - Phthon - UCバークレイ- GPLv3</li>
        <li>Nox - C++</li>Nicira, スタンフォード大学, UCバークレイ - GPLv3</li>
        <li>Floodlight - Java - Big Switch Network - Apache</li>
        <li>OpenDaylight - Java - OpenDaylight - EPL</li>
      </ul>
    <li>1.3</li>
      <ul>
        <li>TremaEdge - Ruby</li>
      </ul>
  </ul -->
</section>

<section class="slide" id="Trema">
  <h2>Tremaの特徴</h2>

  <p>Tremaは、はやくて、やすくて、うまい。</p>
  <ul class="slide">
    <li>
      <p>はやい</p>
      <p>コントローラーを簡単に<!-- font color=red -->短く<!-- /font -->実装できる</p>
    </li>
    <li>
      <p>やすい</p>
      <p>ネットワークエミュレータ機能により高価なスイッチなしに検証できる</p>
    </li>
    <li>
      <p>うまい</p>
      <p>サンプルアプリが豊富</p>
    </li>
  </ul>

</section>

<section class="slide" id="Trema">
  <h2>はやい</h2>

  <p>短いコードでコントローラーを素早く開発</p>
  <div align=right>リピーターハブ　　</div>
<small>
<pre><code>class RepeaterHub < Controller
  def packet_in datapath_id, message
    send_flow_mod_add(
      datapath_id,
      :match => ExactMatch.from( message ),
      :actions => ActionOutput.new( OFPP_FLOOD )
    )
    send_packet_out(
      datapath_id,
      :packet_in => message,
      :actions => ActionOutput.new( OFPP_FLOOD )
    )
  end
end</code></pre>
</small>
</section>

<section class="slide" id="Trema">
  <h2>やすい</h2>

  <p>ネットワークエミュレート機能で高価なスイッチなしで検証</p>

  <center>
  <table>
  <tr>
    <td>
<small><pre>

vhost("host1")
vhost("host2")

vswitch("sw1") {
  datapath_id "0x1"
}
vswitch("sw2") {
  datapath_id "0x2"
}

link "host1", "sw1"
link "host2", "sw2"
link "sw1", "sw2"

</pre></small>
    </td>
    <td>　　　</td>
    <td>
      <img height=512 src="./DSL.png">
    </td>
  </tr>
  </table>
  </center>

</section>

<section class="slide" id="Trema">
  <h2>うまい</h2>

  <ul>
    <li>Trema同梱サンプルアプリ
      <ul>
        <li>Repeter Hub</li>
        <li>Learning Switch</li>
        <li>Traffic Monitor</li>
        <li>他 15 サンプルアプリ</li>
      </ul>
    </li>
    <li>Trema application repository
      <ul>
        <li>Sliceable Switch</li>
        <li>Loadbalance Switch</li>
        <li>他 20 アプリケーション</li>
      </ul>
    </li>
  </ul>

</section>

<section class="slide" id="Trema API">
  <h2>Trema API</h2>

  <p>Trema Ruby API : <a href="http://rubydoc.info/github/trema/trema/master/frames">http://rubydoc.info/github/trema/trema/master/frames</a></p>
  
  <img height=640 src="./TremaAPI.png">
</section>

<section class="slide" id="Lifecycle">
  <h2>開発サイクル</h2>

  <ol>
    <li>設計</li>
      実装機能の設計
    <li>開発(TDD/BDD)</li>
      <ul>
        <li>コントローラー実装</li>
        <li>Trema環境で評価</li>
      </ul>
    <li>評価</li>
      実環境で評価
  </ol>
  <img src="./Lifecycle.png">

</section>

<section class="slide" id="OpenStack">
  <h2>OpenStack</h2>

  <ul>
    <li>Southbound API<br>
      <small>物理及び仮想スイッチと SDN コントローラプラットフォームが制御情報を交換するAPI</small>
    </li>
    <li>Northbound API<br>
      <small>FWやLBのような従来のネットワークサービスや、クラウドリソースのオーケストレーションシステム等のアプリケーションにネットワークの制御情報を提供するAPI</small>
    </li>
  </ul>

  <img src="./OpenStack.png">
</section>

<section class="slide" id="Wakame">
  <h2>Wakame-VDC</h2>

  <p>IaaS型のクラウド環境を実現するための基盤ソフト</p>
  <div align=right><p>http://wakame.jp/wiki/</p></div>
  <img height="512" src="./Wakame-VDC.png">
</section>

<!-- Virtula Netowrk Platform -->

<section class="slide" id="VNP">
  <h2>Virtual Network Platform</h2>

  <div align=center><pre>オーバーレイ方式で仮想ネットワークを構築する基盤ソフトウェア。</pre></div>
  <ul>
    <li>Tremaベース</li>
    <li>開発言語はRuby and C</li>
    <li>GPLv2ライセンス</li>
    <li><a href="https://github.com/trema/virtual-network-platform">https://github.com/trema/virtual-network-platform</a></li>
  </ul>

</section>

<section class="slide" id="vNW">
  <h2>ネットワーク構成</h2>

  <ul>
    <li>エッジのOpen vSwitchにスライスごとに仮想スイッチを構築</li>
    <li>仮想スイッチをVXLANで接続</li>
  </ul>

  <img src="./VNP.png">
</section>

<section class="slide" id="module">
  <h2>アーキテクチャ</h2>

  <table>
    <tr>
      <td><img src="./Module.png"></td>
      <td>
        <ul>
          <li>コントローラー</li>
            <ul>
              <li>ConfigurationFrontend<br><small>仮想NWへの制御要求や構成情報をRESTで受け付ける</small></li>
              <li>Backend DB<br><small>仮想NWへの要求や情報を保持する</small></li>
              <li>VirtualNetworkManager<br><small>REST,OpenFlowでエージェントの制御を行う</small></li>
            </ul>
          <li>エージェント<br><small>VirtualNetworkManagerからの指示に従い、Open vSwitchとVXLAN Tunnel Endpointを制御する</small></li>
        </ul>
      </td>
    </tr>
  </table>
</section>

<section class="slide" id="feature">
  <h2>特徴</h2>

  <ul>
    <li>プロアクティブ型</li>
    <li>コントローラーのスケールアウトに対応</li>
  </ul>

  <img src="./Feature.png">
</section>

<section class="slide" id="api">
  <h2>VNM API</h2>

  <a href="http://trema.github.io/virtual-network-platform/doc/api/api.html">http://trema.github.io/virtual-network-platform/doc/api/api.html</a>

  <ul>
    <li>RESTベース</li>
    <li>JSONフォーマット</li>
    <li>ネットワーク、ポート、MACアドレスの３つ</li>
    <li>新規、削除、一覧、詳細</li>
    <li>"486 Busy Here"に注意</li>
  </ul>
</section>

<!-- deck.navigation snippet -->
<a href="#" class="deck-prev-link" title="Previous">&#8592;</a>
<a href="#" class="deck-next-link" title="Next">&#8594;</a>

<!-- deck.status snippet -->
<p class="deck-status">
	<span class="deck-status-current"></span>
	/
	<span class="deck-status-total"></span>
</p>

<!-- deck.goto snippet -->
<form action="." method="get" class="goto-form">
	<label for="goto-slide">Go to slide:</label>
	<input type="text" name="slidenum" id="goto-slide" list="goto-datalist">
	<datalist id="goto-datalist"></datalist>
	<input type="submit" value="Go">
</form>

<!-- deck.hash snippet -->
<a href="." title="Permalink to this slide" class="deck-permalink">#</a>


<!-- Grab CDN jQuery, with a protocol relative URL; fall back to local if offline -->
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
<script>window.jQuery || document.write('<script src="../jquery-1.7.2.min.js"><\/script>')</script>

<!-- Deck Core and extensions -->
<script src="../core/deck.core.js"></script>
<script src="../extensions/hash/deck.hash.js"></script>
<script src="../extensions/menu/deck.menu.js"></script>
<script src="../extensions/goto/deck.goto.js"></script>
<script src="../extensions/status/deck.status.js"></script>
<script src="../extensions/navigation/deck.navigation.js"></script>
<script src="../extensions/scale/deck.scale.js"></script>

<!-- Initialize the deck -->
<script>
$(function() {
	$.deck('.slide');
});
</script>

</body>
</html>
